# Automatisch

Automatisch is a es6 and template based cucumber automation on web driver io project. Create partial features and feature templates to use them and the project will generate the required feature files for you. The advantage here is the same partial code can be resused in different scenarios. Automatisch used handlebars to create the autogenerated features. This project tests a few pages in the fandango website. The project also houses a json flatten functionality which help one manage the css tags for cucuberjs better. Also we have a new reporter which displays the test report as a json, html or both (its hierarchial structure supporting upto 2 level of suites)

# Partial templates
The projects templates folder has two folders partials and scenarios. Both house hbs files. The partial templates need to go inside the partials and the feature templates go inside the scenarios

consider the following partial template
```shell
Given the user is in the page containing element "Home-PageHeader" text as "{{header-text}}"
      Then the user waits for "2000"
      Then the user enters in element "Home-SearchText" value "{{search-name}}" 
      Then the user clicks "Home-SearchButton"
      Then the user waits for "5000"
```

and the following feature template
```shell
Feature: Fandango Search by movies
  Scenario: Check if search works
    Given the user opens the website
    
    {{> fandangoSearchMovie movie-search }}
```

and the following json for the template
```shell
{
    "movie-search": {
        "header-text": "BUY MOVIE TICKETS",
        "search-name": "black panther"
    }
}
```

the feature file will be generated inside the features folder which the wdio config runs
```shell
Feature: Fandango Search by movies
  Scenario: Check if search works
    Given the user opens the website
    
    
    Given the user is in the page containing element "Home-PageHeader" text as "BUY MOVIE TICKETS"
          Then the user waits for "2000"
          Then the user enters in element "Home-SearchText" value "black panther" 
          Then the user clicks "Home-SearchButton"
          Then the user waits for "5000"
```

#Json Flatten
Its a common practice to have all css tags in a json and refer it inside the step definitions. The problem however is to name the properties in an understandable way to be reused. especially with big websites managing the json can be cumbersome when we have to give unique names for each css tags in json. Json flatten takes an hierarchial json structure and creates a flattened json

consider the following json
```shell
{
    "Home": {
        "SearchText": ".fan-input.style-search:not(.width-100)",
        "SearchButton": "button.fan-btn.fan-btn-style-go",
        "PageHeader": ".movie-tickets-header--heading.heading-size-l.heading-style-1.inline"
    },
    "Movies": {
        "SearchText": ".global-search-input.ui-autocomplete-input",
        "SearchButton": "#global-search-button",
        "HeaderText": ".page-header",
        "Theater1": ".fd-theater:first-of-type a",
        "Theater2": ".fd-theater:nth-of-type(3) a"
    }
}
```

the output json will be
```shell
{
    "Home-SearchText": ".fan-input.style-search:not(.width-100)",
    "Home-SearchButton": "button.fan-btn.fan-btn-style-go",
    "Home-PageHeader": ".movie-tickets-header--heading.heading-size-l.heading-style-1.inline",
    "Movies-SearchText": ".global-search-input.ui-autocomplete-input",
    "Movies-SearchButton": "#global-search-button",
    "Movies-HeaderText": ".page-header",
    "Movies-Theater1": ".fd-theater:first-of-type a",
    "Movies-Theater2": ".fd-theater:nth-of-type(3) a"
}
```

#Amass Reporter
A custom reporter which outputs the test results in hierarchial json and html. Reports are configured to be outputted to exhaust/amass folder. The settting can be changed in the wdio configs

#Config changes
Under wdio.es6 folder there are bootstrap*.js files which can be used to modify wdio config and life cycle hooks

